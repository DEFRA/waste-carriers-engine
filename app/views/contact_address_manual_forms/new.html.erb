<%= render("shared/back", back_path: back_contact_address_manual_forms_path(@contact_address_manual_form.reg_identifier)) %>

<div class="text">
  <%= form_for(@contact_address_manual_form) do |f| %>
    <%= render("shared/errors", object: @contact_address_manual_form) %>

    <% if @contact_address_manual_form.os_places_error %>
    <div class="error-summary" role="alert">
      <h2 class="heading-medium error-summary-heading"><%= t(".os_places_error_heading") %></h2>
      <p><%= t(".os_places_error_text") %></p>
    </div>
    <% end %>

    <h1 class="heading-large"><%= t(".heading") %></h1>

    <% unless @contact_address_manual_form.overseas? %>
      <div class="form-group">
        <label class="form-label"><%= t(".preset_postcode_label") %></label>
        <span class="postcode"><%= @contact_address_manual_form.postcode %></span>
        <%= link_to(t(".postcode_change_link"), back_contact_address_manual_forms_path(@contact_address_manual_form.reg_identifier)) %>
      </div>
    <% end %>

    <% if @contact_address_manual_form.errors[:house_number].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="house_number">
        <% if @contact_address_manual_form.errors[:house_number].any? %>
        <span class="error-message"><%= @contact_address_manual_form.errors[:house_number].join(", ") %></span>
        <% end %>

        <%= f.label :house_number, class: "form-label" do %>
          <%= t(".house_number_label") %>
          <span class='form-hint'><%= t(".house_number_hint") %></span>
        <% end %>
        <%= f.text_field :house_number, value: @contact_address_manual_form.house_number, class: "form-control" %>
      </fieldset>
    </div>

    <% if @contact_address_manual_form.errors[:address_line_1].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="address_line_1">
        <% if @contact_address_manual_form.errors[:address_line_1].any? %>
        <span class="error-message"><%= @contact_address_manual_form.errors[:address_line_1].join(", ") %></span>
        <% end %>

        <%= f.label :address_line_1, t(".address_line_1_label"), class: "form-label" %>
        <%= f.text_field :address_line_1, value: @contact_address_manual_form.address_line_1, class: "form-control" %>
      </fieldset>
    </div>

    <% if @contact_address_manual_form.errors[:address_line_2].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="address_line_2">
        <% if @contact_address_manual_form.errors[:address_line_2].any? %>
        <span class="error-message"><%= @contact_address_manual_form.errors[:address_line_2].join(", ") %></span>
        <% end %>

        <%= f.label :address_line_2, t(".address_line_2_label"), class: "form-label" %>
        <%= f.text_field :address_line_2, value: @contact_address_manual_form.address_line_2, class: "form-control" %>
      </fieldset>
    </div>

    <% if @contact_address_manual_form.errors[:town_city].any? %>
    <div class="form-group form-group-error">
    <% else %>
    <div class="form-group">
    <% end %>
      <fieldset id="town_city">
        <% if @contact_address_manual_form.errors[:town_city].any? %>
        <span class="error-message"><%= @contact_address_manual_form.errors[:town_city].join(", ") %></span>
        <% end %>

        <%= f.label :town_city, t(".town_city_label"), class: "form-label" %>
        <%= f.text_field :town_city, value: @contact_address_manual_form.town_city, class: "form-control" %>
      </fieldset>
    </div>

    <% if @contact_address_manual_form.overseas? %>
      <% if @contact_address_manual_form.errors[:postcode].any? %>
      <div class="form-group form-group-error">
      <% else %>
      <div class="form-group">
      <% end %>
        <fieldset id="postcode">
          <% if @contact_address_manual_form.errors[:postcode].any? %>
          <span class="error-message"><%= @contact_address_manual_form.errors[:postcode].join(", ") %></span>
          <% end %>

          <%= f.label :postcode, t(".postcode_label"), class: "form-label" %>
          <%= f.text_field :postcode, value: @contact_address_manual_form.postcode, class: "form-control" %>
        </fieldset>
      </div>

      <% if @contact_address_manual_form.errors[:country].any? %>
      <div class="form-group form-group-error">
      <% else %>
      <div class="form-group">
      <% end %>
        <fieldset id="country">
          <% if @contact_address_manual_form.errors[:country].any? %>
          <span class="error-message"><%= @contact_address_manual_form.errors[:country].join(", ") %></span>
          <% end %>

          <%= f.label :country, t(".country_label"), class: "form-label" %>
          <%= f.text_field :country, value: @contact_address_manual_form.country, class: "form-control" %>
        </fieldset>
      </div>
    <% else %>
      <%= f.hidden_field :postcode, value: @contact_address_manual_form.postcode %>
    <% end %>

    <%= f.hidden_field :reg_identifier, value: @contact_address_manual_form.reg_identifier %>
    <div class="form-group">
      <%= f.submit t(".next_button"), class: "button" %>
    </div>
  <% end %>
</div>
